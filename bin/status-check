#!/usr/bin/env node

var commander = require('commander'),
    package = require('../package.json');

commander.version(package.version)
    .option('-l, --list', 'Lists the status of all the observed containers')
    .parse(process.argv);


if (commander.list) {
    var client = require('socket.io-client').connect('http://127.0.0.1:4322');
    client.on('status', function (status) {
        status.forEach(function (instance) {
            console.log(instance.id + ': ' + instance.status);
        });
        client.close();
    });
    client.emit('status');
}

